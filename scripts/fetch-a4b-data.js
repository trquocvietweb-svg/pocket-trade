/* eslint-disable @typescript-eslint/no-require-imports, @typescript-eslint/no-unused-vars */
/**
 * Script fetch data từ Serebii cho Deluxe Pack ex (A4B)
 * Chạy: node scripts/fetch-a4b-data.js
 */

const fs = require('fs');
const path = require('path');

// Mapping từ Serebii image names sang type/rarity
const TYPE_MAP = {
  'grass': 'Grass',
  'fire': 'Fire',
  'water': 'Water',
  'electric': 'Lightning',
  'lightning': 'Lightning',
  'psychic': 'Psychic',
  'fighting': 'Fighting',
  'darkness': 'Darkness',
  'dark': 'Darkness',
  'metal': 'Metal',
  'steel': 'Metal',
  'dragon': 'Dragon',
  'colorless': 'Colorless',
  'normal': 'Colorless',
  'fairy': 'Psychic', // In Pocket, Fairy is Psychic
};

const RARITY_MAP = {
  'diamond1': '◆',
  'diamond2': '◆◆',
  'diamond3': '◆◆◆',
  'diamond4': '◆◆◆◆',
  'star1': '☆',
  'star2': '☆☆',
  'star3': '☆☆☆',
  'crown': 'Crown Rare',
};

// Data từ Serebii (parsed manually based on pattern)
// Format: [cardNumber, name, type, rarity]
// Type từ weakness icon hoặc card type icon
const SEREBII_DATA = [
  // Grass Pokemon (001-046)
  ['001', 'Bulbasaur', 'Grass', '◆'],
  ['002', 'Bulbasaur', 'Grass', '◆'],
  ['003', 'Ivysaur', 'Grass', '◆◆'],
  ['004', 'Ivysaur', 'Grass', '◆◆'],
  ['005', 'Venusaur ex', 'Grass', '◆◆◆◆'],
  ['006', 'Weedle', 'Grass', '◆'],
  ['007', 'Weedle', 'Grass', '◆'],
  ['008', 'Kakuna', 'Grass', '◆◆'],
  ['009', 'Kakuna', 'Grass', '◆◆'],
  ['010', 'Beedrill ex', 'Grass', '◆◆◆◆'],
  ['011', 'Exeggcute', 'Grass', '◆'],
  ['012', 'Exeggcute', 'Grass', '◆'],
  ['013', 'Exeggutor ex', 'Grass', '◆◆◆◆'],
  ['014', 'Hoppip', 'Grass', '◆'],
  ['015', 'Hoppip', 'Grass', '◆'],
  ['016', 'Skiploom', 'Grass', '◆◆'],
  ['017', 'Skiploom', 'Grass', '◆◆'],
  ['018', 'Jumpluff', 'Grass', '◆◆◆'],
  ['019', 'Jumpluff', 'Grass', '◆◆◆'],
  ['020', 'Yanma', 'Grass', '◆'],
  ['021', 'Yanma', 'Grass', '◆'],
  ['022', 'Yanmega ex', 'Grass', '◆◆◆◆'],
  ['023', 'Shuckle ex', 'Grass', '◆◆◆◆'],
  ['024', 'Celebi ex', 'Grass', '◆◆◆◆'],
  ['025', 'Cherubi', 'Grass', '◆'],
  ['026', 'Cherubi', 'Grass', '◆'],
  ['027', 'Cherrim', 'Grass', '◆◆'],
  ['028', 'Cherrim', 'Grass', '◆◆'],
  ['029', 'Leafeon ex', 'Grass', '◆◆◆◆'],
  ['030', 'Shaymin', 'Grass', '◆◆◆'],
  ['031', 'Shaymin', 'Grass', '◆◆◆'],
  ['032', 'Snivy', 'Grass', '◆'],
  ['033', 'Snivy', 'Grass', '◆'],
  ['034', 'Servine', 'Grass', '◆◆'],
  ['035', 'Servine', 'Grass', '◆◆'],
  ['036', 'Serperior', 'Grass', '◆◆◆'],
  ['037', 'Serperior', 'Grass', '◆◆◆'],
  ['038', 'Rowlet', 'Grass', '◆'],
  ['039', 'Rowlet', 'Grass', '◆'],
  ['040', 'Dartrix', 'Grass', '◆◆'],
  ['041', 'Dartrix', 'Grass', '◆◆'],
  ['042', 'Decidueye ex', 'Grass', '◆◆◆◆'],
  ['043', 'Fomantis', 'Grass', '◆'],
  ['044', 'Fomantis', 'Grass', '◆'],
  ['045', 'Lurantis', 'Grass', '◆◆◆'],
  ['046', 'Lurantis', 'Grass', '◆◆◆'],
  // Fire Pokemon (047-082)
  ['047', 'Charmander', 'Fire', '◆'],
  ['048', 'Charmander', 'Fire', '◆'],
  ['049', 'Charmeleon', 'Fire', '◆◆'],
  ['050', 'Charmeleon', 'Fire', '◆◆'],
  ['051', 'Charizard ex', 'Fire', '◆◆◆◆'],
  ['052', 'Growlithe', 'Fire', '◆'],
  ['053', 'Growlithe', 'Fire', '◆'],
  ['054', 'Arcanine', 'Fire', '◆◆◆'],
  ['055', 'Arcanine', 'Fire', '◆◆◆'],
  ['056', 'Arcanine ex', 'Fire', '◆◆◆◆'],
  ['057', 'Ponyta', 'Fire', '◆'],
  ['058', 'Ponyta', 'Fire', '◆'],
  ['059', 'Rapidash', 'Fire', '◆◆'],
  ['060', 'Rapidash', 'Fire', '◆◆'],
  ['061', 'Magmar', 'Fire', '◆◆'],
  ['062', 'Magmar', 'Fire', '◆◆'],
  ['063', 'Flareon', 'Fire', '◆◆◆'],
  ['064', 'Flareon', 'Fire', '◆◆◆'],
  ['065', 'Moltres', 'Fire', '◆◆◆'],
  ['066', 'Moltres', 'Fire', '◆◆◆'],
  ['067', 'Moltres ex', 'Fire', '◆◆◆◆'],
  ['068', 'Ho-Oh ex', 'Fire', '◆◆◆◆'],
  ['069', 'Torchic', 'Fire', '◆'],
  ['070', 'Torchic', 'Fire', '◆'],
  ['071', 'Combusken', 'Fire', '◆◆'],
  ['072', 'Combusken', 'Fire', '◆◆'],
  ['073', 'Blaziken ex', 'Fire', '◆◆◆◆'],
  ['074', 'Tepig', 'Fire', '◆'],
  ['075', 'Tepig', 'Fire', '◆'],
  ['076', 'Pignite', 'Fire', '◆◆'],
  ['077', 'Pignite', 'Fire', '◆◆'],
  ['078', 'Emboar', 'Fire', '◆◆◆'],
  ['079', 'Emboar', 'Fire', '◆◆◆'],
  ['080', 'Litten', 'Fire', '◆'],
  ['081', 'Torracat', 'Fire', '◆◆'],
  ['082', 'Incineroar ex', 'Fire', '◆◆◆◆'],
  // Water Pokemon (083-127)
  ['083', 'Squirtle', 'Water', '◆'],
  ['084', 'Squirtle', 'Water', '◆'],
  ['085', 'Wartortle', 'Water', '◆◆'],
  ['086', 'Wartortle', 'Water', '◆◆'],
  ['087', 'Blastoise ex', 'Water', '◆◆◆◆'],
  ['088', 'Psyduck', 'Water', '◆'],
  ['089', 'Psyduck', 'Water', '◆'],
  ['090', 'Golduck', 'Water', '◆◆'],
  ['091', 'Golduck', 'Water', '◆◆'],
  ['092', 'Poliwag', 'Water', '◆'],
  ['093', 'Poliwag', 'Water', '◆'],
  ['094', 'Poliwhirl', 'Water', '◆◆'],
  ['095', 'Poliwhirl', 'Water', '◆◆'],
  ['096', 'Poliwrath', 'Water', '◆◆◆'],
  ['097', 'Poliwrath', 'Water', '◆◆◆'],
  ['098', 'Tentacool', 'Water', '◆'],
  ['099', 'Tentacool', 'Water', '◆'],
  ['100', 'Tentacruel', 'Water', '◆◆'],
  ['101', 'Tentacruel', 'Water', '◆◆'],
  ['102', 'Seel', 'Water', '◆'],
  ['103', 'Seel', 'Water', '◆'],
  ['104', 'Dewgong', 'Water', '◆◆◆'],
  ['105', 'Dewgong', 'Water', '◆◆◆'],
  ['106', 'Shellder', 'Water', '◆'],
  ['107', 'Shellder', 'Water', '◆'],
  ['108', 'Cloyster', 'Water', '◆◆'],
  ['109', 'Cloyster', 'Water', '◆◆'],
  ['110', 'Staryu', 'Water', '◆'],
  ['111', 'Staryu', 'Water', '◆'],
  ['112', 'Starmie ex', 'Water', '◆◆◆◆'],
  ['113', 'Lapras', 'Water', '◆◆'],
  ['114', 'Lapras', 'Water', '◆◆'],
  ['115', 'Vaporeon', 'Water', '◆◆◆'],
  ['116', 'Vaporeon', 'Water', '◆◆◆'],
  ['117', 'Omanyte', 'Water', '◆'],
  ['118', 'Omastar', 'Water', '◆◆'],
  ['119', 'Articuno', 'Water', '◆◆◆'],
  ['120', 'Articuno', 'Water', '◆◆◆'],
  ['121', 'Articuno ex', 'Water', '◆◆◆◆'],
  ['122', 'Suicune ex', 'Water', '◆◆◆◆'],
  ['123', 'Mudkip', 'Water', '◆'],
  ['124', 'Mudkip', 'Water', '◆'],
  ['125', 'Marshtomp', 'Water', '◆◆'],
  ['126', 'Marshtomp', 'Water', '◆◆'],
  ['127', 'Swampert ex', 'Water', '◆◆◆◆'],
  // Continue Water (128-137)
  ['128', 'Corphish', 'Water', '◆'],
  ['129', 'Corphish', 'Water', '◆'],
  ['130', 'Crawdaunt', 'Water', '◆◆'],
  ['131', 'Crawdaunt', 'Water', '◆◆'],
  ['132', 'Piplup', 'Water', '◆'],
  ['133', 'Piplup', 'Water', '◆'],
  ['134', 'Prinplup', 'Water', '◆◆'],
  ['135', 'Prinplup', 'Water', '◆◆'],
  ['136', 'Empoleon', 'Water', '◆◆◆'],
  ['137', 'Empoleon', 'Water', '◆◆◆'],
  // Water cont (138-148)
  ['138', 'Glaceon ex', 'Water', '◆◆◆◆'],
  ['139', 'Palkia ex', 'Water', '◆◆◆◆'],
  ['140', 'Froakie', 'Water', '◆'],
  ['141', 'Froakie', 'Water', '◆'],
  ['142', 'Frogadier', 'Water', '◆◆'],
  ['143', 'Frogadier', 'Water', '◆◆'],
  ['144', 'Greninja', 'Water', '◆◆◆'],
  ['145', 'Greninja', 'Water', '◆◆◆'],
  ['146', 'Greninja ex', 'Water', '◆◆◆◆'],
  ['147', 'Popplio', 'Water', '◆'],
  ['148', 'Brionne', 'Water', '◆◆'],
  // Water/Psychic (149-184)
  ['149', 'Primarina ex', 'Water', '◆◆◆◆'],
  ['150', 'Pikachu', 'Lightning', '◆'],
  ['151', 'Pikachu', 'Lightning', '◆'],
  ['152', 'Raichu ex', 'Lightning', '◆◆◆◆'],
  ['153', 'Magnemite', 'Lightning', '◆'],
  ['154', 'Magnemite', 'Lightning', '◆'],
  ['155', 'Magneton', 'Lightning', '◆◆'],
  ['156', 'Magneton', 'Lightning', '◆◆'],
  ['157', 'Voltorb', 'Lightning', '◆'],
  ['158', 'Voltorb', 'Lightning', '◆'],
  ['159', 'Electrode', 'Lightning', '◆◆'],
  ['160', 'Electrode', 'Lightning', '◆◆'],
  ['161', 'Electabuzz', 'Lightning', '◆◆'],
  ['162', 'Electabuzz', 'Lightning', '◆◆'],
  ['163', 'Jolteon', 'Lightning', '◆◆◆'],
  ['164', 'Jolteon', 'Lightning', '◆◆◆'],
  ['165', 'Zapdos', 'Lightning', '◆◆◆'],
  ['166', 'Zapdos', 'Lightning', '◆◆◆'],
  ['167', 'Zapdos ex', 'Lightning', '◆◆◆◆'],
  ['168', 'Pikachu ex', 'Lightning', '◆◆◆◆'],
  // Psychic (169-184)
  ['169', 'Abra', 'Psychic', '◆'],
  ['170', 'Kadabra', 'Psychic', '◆◆'],
  ['171', 'Alakazam ex', 'Psychic', '◆◆◆◆'],
  ['172', 'Gastly', 'Psychic', '◆'],
  ['173', 'Gastly', 'Psychic', '◆'],
  ['174', 'Haunter', 'Psychic', '◆◆'],
  ['175', 'Haunter', 'Psychic', '◆◆'],
  ['176', 'Gengar ex', 'Psychic', '◆◆◆◆'],
  ['177', 'Mr. Mime', 'Psychic', '◆◆'],
  ['178', 'Mr. Mime', 'Psychic', '◆◆'],
  ['179', 'Jynx', 'Psychic', '◆◆'],
  ['180', 'Jynx', 'Psychic', '◆◆'],
  ['181', 'Mewtwo ex', 'Psychic', '◆◆◆◆'],
  ['182', 'Mew', 'Psychic', '◆◆◆'],
  ['183', 'Mew', 'Psychic', '◆◆◆'],
  ['184', 'Mew ex', 'Psychic', '◆◆◆◆'],
  // Continue Psychic (185-212)
  ['185', 'Natu', 'Psychic', '◆'],
  ['186', 'Natu', 'Psychic', '◆'],
  ['187', 'Xatu', 'Psychic', '◆◆'],
  ['188', 'Xatu', 'Psychic', '◆◆'],
  ['189', 'Ralts', 'Psychic', '◆'],
  ['190', 'Ralts', 'Psychic', '◆'],
  ['191', 'Kirlia', 'Psychic', '◆◆'],
  ['192', 'Kirlia', 'Psychic', '◆◆'],
  ['193', 'Gardevoir', 'Psychic', '◆◆◆'],
  ['194', 'Gardevoir', 'Psychic', '◆◆◆'],
  ['195', 'Gardevoir ex', 'Psychic', '◆◆◆◆'],
  ['196', 'Duskull', 'Psychic', '◆'],
  ['197', 'Duskull', 'Psychic', '◆'],
  ['198', 'Dusclops', 'Psychic', '◆◆'],
  ['199', 'Dusclops', 'Psychic', '◆◆'],
  ['200', 'Dusknoir', 'Psychic', '◆◆◆'],
  ['201', 'Dusknoir', 'Psychic', '◆◆◆'],
  ['202', 'Espeon ex', 'Psychic', '◆◆◆◆'],
  ['203', 'Woobat', 'Psychic', '◆'],
  ['204', 'Woobat', 'Psychic', '◆'],
  ['205', 'Swoobat', 'Psychic', '◆◆'],
  ['206', 'Swoobat', 'Psychic', '◆◆'],
  ['207', 'Dedenne', 'Psychic', '◆'],
  ['208', 'Dedenne', 'Psychic', '◆'],
  ['209', 'Sylveon ex', 'Psychic', '◆◆◆◆'],
  ['210', 'Mimikyu', 'Psychic', '◆◆'],
  ['211', 'Mimikyu', 'Psychic', '◆◆'],
  ['212', 'Lunala ex', 'Psychic', '◆◆◆◆'],
  // Fighting (213-248)
  ['213', 'Sandshrew', 'Fighting', '◆'],
  ['214', 'Sandshrew', 'Fighting', '◆'],
  ['215', 'Sandslash', 'Fighting', '◆◆'],
  ['216', 'Sandslash', 'Fighting', '◆◆'],
  ['217', 'Mankey', 'Fighting', '◆'],
  ['218', 'Mankey', 'Fighting', '◆'],
  ['219', 'Primeape', 'Fighting', '◆◆'],
  ['220', 'Primeape', 'Fighting', '◆◆'],
  ['221', 'Machop', 'Fighting', '◆'],
  ['222', 'Machop', 'Fighting', '◆'],
  ['223', 'Machoke', 'Fighting', '◆◆'],
  ['224', 'Machoke', 'Fighting', '◆◆'],
  ['225', 'Machamp ex', 'Fighting', '◆◆◆◆'],
  ['226', 'Geodude', 'Fighting', '◆'],
  ['227', 'Geodude', 'Fighting', '◆'],
  ['228', 'Graveler', 'Fighting', '◆◆'],
  ['229', 'Graveler', 'Fighting', '◆◆'],
  ['230', 'Golem ex', 'Fighting', '◆◆◆◆'],
  ['231', 'Cubone', 'Fighting', '◆'],
  ['232', 'Cubone', 'Fighting', '◆'],
  ['233', 'Marowak ex', 'Fighting', '◆◆◆◆'],
  ['234', 'Hitmonlee', 'Fighting', '◆◆'],
  ['235', 'Hitmonlee', 'Fighting', '◆◆'],
  ['236', 'Hitmonchan', 'Fighting', '◆◆'],
  ['237', 'Hitmonchan', 'Fighting', '◆◆'],
  ['238', 'Rhyhorn', 'Fighting', '◆'],
  ['239', 'Rhyhorn', 'Fighting', '◆'],
  ['240', 'Rhydon', 'Fighting', '◆◆◆'],
  ['241', 'Rhydon', 'Fighting', '◆◆◆'],
  ['242', 'Aerodactyl ex', 'Fighting', '◆◆◆◆'],
  ['243', 'Phanpy', 'Fighting', '◆'],
  ['244', 'Phanpy', 'Fighting', '◆'],
  ['245', 'Donphan ex', 'Fighting', '◆◆◆◆'],
  ['246', 'Gible', 'Fighting', '◆'],
  ['247', 'Gabite', 'Fighting', '◆◆'],
  ['248', 'Garchomp ex', 'Fighting', '◆◆◆◆'],
  // Fighting cont + Dark (249-280)
  ['249', 'Riolu', 'Fighting', '◆'],
  ['250', 'Riolu', 'Fighting', '◆'],
  ['251', 'Lucario ex', 'Fighting', '◆◆◆◆'],
  ['252', 'Gallade ex', 'Fighting', '◆◆◆◆'],
  ['253', 'Rockruff', 'Fighting', '◆'],
  ['254', 'Rockruff', 'Fighting', '◆'],
  ['255', 'Lycanroc ex', 'Fighting', '◆◆◆◆'],
  ['256', 'Passimian ex', 'Fighting', '◆◆◆◆'],
  ['257', 'Buzzwole ex', 'Fighting', '◆◆◆◆'],
  // Darkness (258-280)
  ['258', 'Zubat', 'Darkness', '◆'],
  ['259', 'Zubat', 'Darkness', '◆'],
  ['260', 'Golbat', 'Darkness', '◆◆'],
  ['261', 'Golbat', 'Darkness', '◆◆'],
  ['262', 'Crobat ex', 'Darkness', '◆◆◆◆'],
  ['263', 'Grimer', 'Darkness', '◆'],
  ['264', 'Grimer', 'Darkness', '◆'],
  ['265', 'Alolan Muk ex', 'Darkness', '◆◆◆◆'],
  ['266', 'Paldean Wooper', 'Darkness', '◆'],
  ['267', 'Paldean Wooper', 'Darkness', '◆'],
  ['268', 'Paldean Clodsire ex', 'Darkness', '◆◆◆◆'],
  ['269', 'Murkrow', 'Darkness', '◆'],
  ['270', 'Murkrow', 'Darkness', '◆'],
  ['271', 'Honchkrow', 'Darkness', '◆◆◆'],
  ['272', 'Honchkrow', 'Darkness', '◆◆◆'],
  ['273', 'Umbreon ex', 'Darkness', '◆◆◆◆'],
  ['274', 'Sneasel', 'Darkness', '◆'],
  ['275', 'Sneasel', 'Darkness', '◆'],
  ['276', 'Weavile ex', 'Darkness', '◆◆◆◆'],
  ['277', 'Darkrai ex', 'Darkness', '◆◆◆◆'],
  ['278', 'Guzzlord ex', 'Darkness', '◆◆◆◆'],
  // Metal (279-302)
  ['279', 'Alolan Diglett', 'Metal', '◆'],
  ['280', 'Alolan Diglett', 'Metal', '◆'],
  ['281', 'Alolan Dugtrio ex', 'Metal', '◆◆◆◆'],
  ['282', 'Skarmory ex', 'Metal', '◆◆◆◆'],
  ['283', 'Probopass ex', 'Metal', '◆◆◆◆'],
  ['284', 'Dialga ex', 'Metal', '◆◆◆◆'],
  ['285', 'Scizor', 'Metal', '◆◆◆'],
  ['286', 'Scizor', 'Metal', '◆◆◆'],
  ['287', 'Scizor ex', 'Metal', '◆◆◆◆'],
  ['288', 'Beldum', 'Metal', '◆'],
  ['289', 'Beldum', 'Metal', '◆'],
  ['290', 'Metang', 'Metal', '◆◆'],
  ['291', 'Metang', 'Metal', '◆◆'],
  ['292', 'Metagross ex', 'Metal', '◆◆◆◆'],
  ['293', 'Solgaleo ex', 'Metal', '◆◆◆◆'],
  ['294', 'Meltan', 'Metal', '◆'],
  ['295', 'Meltan', 'Metal', '◆'],
  ['296', 'Melmetal', 'Metal', '◆◆◆'],
  ['297', 'Melmetal', 'Metal', '◆◆◆'],
  ['298', 'Tinkatink', 'Metal', '◆'],
  ['299', 'Tinkatink', 'Metal', '◆'],
  ['300', 'Tinkatuff', 'Metal', '◆◆'],
  ['301', 'Tinkatuff', 'Metal', '◆◆'],
  ['302', 'Tinkaton ex', 'Metal', '◆◆◆◆'],
  // Dragon (303-308)
  ['303', 'Dratini', 'Dragon', '◆'],
  ['304', 'Dratini', 'Dragon', '◆'],
  ['305', 'Dragonair', 'Dragon', '◆◆'],
  ['306', 'Dragonair', 'Dragon', '◆◆'],
  ['307', 'Dragonite', 'Dragon', '◆◆◆'],
  ['308', 'Dragonite ex', 'Dragon', '◆◆◆◆'],
  // Colorless (309-336)
  ['309', 'Pidgey', 'Colorless', '◆'],
  ['310', 'Pidgey', 'Colorless', '◆'],
  ['311', 'Pidgeotto', 'Colorless', '◆◆'],
  ['312', 'Pidgeotto', 'Colorless', '◆◆'],
  ['313', 'Pidgeot ex', 'Colorless', '◆◆◆◆'],
  ['314', 'Jigglypuff', 'Colorless', '◆'],
  ['315', 'Jigglypuff', 'Colorless', '◆'],
  ['316', 'Wigglytuff ex', 'Colorless', '◆◆◆◆'],
  ['317', 'Farfetch\'d', 'Colorless', '◆'],
  ['318', 'Farfetch\'d', 'Colorless', '◆'],
  ['319', 'Lickitung', 'Colorless', '◆'],
  ['320', 'Lickitung', 'Colorless', '◆'],
  ['321', 'Lickilicky ex', 'Colorless', '◆◆◆◆'],
  ['322', 'Chansey', 'Colorless', '◆◆'],
  ['323', 'Chansey', 'Colorless', '◆◆'],
  ['324', 'Eevee', 'Colorless', '◆'],
  ['325', 'Eevee', 'Colorless', '◆'],
  ['326', 'Eevee ex', 'Colorless', '◆◆◆◆'],
  ['327', 'Snorlax', 'Colorless', '◆◆◆'],
  ['328', 'Snorlax', 'Colorless', '◆◆◆'],
  ['329', 'Snorlax ex', 'Colorless', '◆◆◆◆'],
  ['330', 'Lugia ex', 'Colorless', '◆◆◆◆'],
  ['331', 'Slakoth', 'Colorless', '◆'],
  ['332', 'Vigoroth', 'Colorless', '◆◆'],
  ['333', 'Slaking', 'Colorless', '◆◆◆'],
  ['334', 'Swablu', 'Colorless', '◆'],
  ['335', 'Swablu', 'Colorless', '◆'],
  ['336', 'Altaria', 'Colorless', '◆◆◆'],
  // Colorless cont (337-353) + Trainers
  ['337', 'Bidoof', 'Colorless', '◆'],
  ['338', 'Bidoof', 'Colorless', '◆'],
  ['339', 'Bibarel ex', 'Colorless', '◆◆◆◆'],
  ['340', 'Chatot', 'Colorless', '◆'],
  ['341', 'Arceus ex', 'Colorless', '◆◆◆◆'],
  ['342', 'Lillipup', 'Colorless', '◆'],
  ['343', 'Lillipup', 'Colorless', '◆'],
  ['344', 'Herdier', 'Colorless', '◆◆'],
  ['345', 'Stoutland', 'Colorless', '◆◆◆'],
  ['346', 'Slurpuff', 'Colorless', '◆◆'],
  ['347', 'Oricorio', 'Colorless', '◆◆'],
  ['348', 'Oricorio', 'Colorless', '◆◆'],
  // Trainers (349-353) - no type
  ['349', 'Poké Ball', '', '◆'],
  ['350', 'Professor\'s Research', '', '◆◆'],
  ['351', 'Potion', '', '◆'],
  ['352', 'X Speed', '', '◆'],
  ['353', 'Rare Candy', '', '◆◆'],
  // Secret Rare (354-379)
  ['354', 'Floragato', 'Grass', '☆'],
  ['355', 'Crawdaunt', 'Water', '☆'],
  ['356', 'Greninja', 'Water', '☆'],
  ['357', 'Gardevoir', 'Psychic', '☆'],
  ['358', 'Slurpuff', 'Colorless', '☆'],
  ['359', 'Farfetch\'d', 'Colorless', '☆'],
  ['360', 'Buzzwole ex', 'Fighting', '☆'],
  ['361', 'Charizard ex', 'Fire', '☆'],
  ['362', 'Ho-Oh ex', 'Fire', '☆'],
  ['363', 'Palkia ex', 'Water', '☆'],
  ['364', 'Pikachu ex', 'Lightning', '☆'],
  ['365', 'Mewtwo ex', 'Psychic', '☆'],
  ['366', 'Mew ex', 'Psychic', '☆'],
  ['367', 'Lunala ex', 'Psychic', '☆'],
  ['368', 'Dialga ex', 'Metal', '☆'],
  ['369', 'Solgaleo ex', 'Metal', '☆'],
  ['370', 'Eevee ex', 'Colorless', '☆'],
  ['371', 'Lugia ex', 'Colorless', '☆'],
  ['372', 'Arceus ex', 'Colorless', '☆'],
  ['373', 'Professor\'s Research', '', '☆☆'],
  ['374', 'Lillie', '', '☆☆'],
  ['375', 'Lusamine', '', '☆☆'],
  ['376', 'Giovanni', '', '☆☆☆'],
  ['377', 'Giratina ex', 'Psychic', '☆☆'],
  ['378', 'Darkrai ex', 'Darkness', '☆☆'],
  ['379', 'Rare Candy', '', 'Crown Rare'],
];

// Output file
const outputPath = path.join(__dirname, '..', 'convex', 'data', 'A4B_data_fixed.json');

// Read existing data
const existingDataPath = path.join(__dirname, '..', 'convex', 'data', 'A4B_data.json');
const existingData = JSON.parse(fs.readFileSync(existingDataPath, 'utf8'));

// Merge with type/rarity info
const fixedCards = existingData.cards.map(card => {
  const serebiiInfo = SEREBII_DATA.find(s => s[0] === card.localId);
  if (serebiiInfo) {
    return {
      ...card,
      types: serebiiInfo[2] ? [serebiiInfo[2]] : [],
      rarity: serebiiInfo[3],
    };
  }
  return card;
});

const fixedData = {
  ...existingData,
  cards: fixedCards,
};

fs.writeFileSync(outputPath, JSON.stringify(fixedData, null, 2));
console.log(`Fixed data written to ${outputPath}`);
console.log(`Total cards: ${fixedCards.length}`);
console.log(`Cards with type: ${fixedCards.filter(c => c.types && c.types.length > 0).length}`);
console.log(`Cards with rarity: ${fixedCards.filter(c => c.rarity).length}`);
